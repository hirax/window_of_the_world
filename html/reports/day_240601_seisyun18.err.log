Traceback (most recent call last):
  File "/opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/site-packages/nbclient/client.py", line 1305, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/site-packages/jupyter_core/utils/__init__.py", line 173, in wrapped
    return loop.run_until_complete(inner)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/asyncio/base_events.py", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/site-packages/nbclient/client.py", line 705, in async_execute
    await self.async_execute_cell(
  File "/opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/site-packages/nbclient/client.py", line 1058, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/site-packages/nbclient/client.py", line 914, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
import cv2
import numpy as np
from PIL import ImageFont, ImageDraw, Image
import matplotlib.pyplot as plt

def put_text(img, text, anchor, direction,anc_pos, size, color):
    font = ImageFont.truetype(
        "data/day_240601_ipamp.ttf", size)
    img = Image.fromarray(img)
    draw = ImageDraw.Draw(img)
    draw.text(anchor,
              text,
              fill=color,
              font=font,
              direction=direction,
              anchor=anc_pos
             )
    return np.array(img)
------------------


[0;31m---------------------------------------------------------------------------[0m
[0;31mImportError[0m                               Traceback (most recent call last)
Cell [0;32mIn[1], line 3[0m
[1;32m      1[0m [38;5;28;01mimport[39;00m [38;5;21;01mcv2[39;00m
[1;32m      2[0m [38;5;28;01mimport[39;00m [38;5;21;01mnumpy[39;00m [38;5;28;01mas[39;00m [38;5;21;01mnp[39;00m
[0;32m----> 3[0m [38;5;28;01mfrom[39;00m [38;5;21;01mPIL[39;00m [38;5;28;01mimport[39;00m ImageFont, ImageDraw, Image
[1;32m      4[0m [38;5;28;01mimport[39;00m [38;5;21;01mmatplotlib[39;00m[38;5;21;01m.[39;00m[38;5;21;01mpyplot[39;00m [38;5;28;01mas[39;00m [38;5;21;01mplt[39;00m
[1;32m      6[0m [38;5;28;01mdef[39;00m [38;5;21mput_text[39m(img, text, anchor, direction,anc_pos, size, color):

File [0;32m/opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/site-packages/PIL/ImageFont.py:35[0m
[1;32m     32[0m [38;5;28;01mfrom[39;00m [38;5;21;01menum[39;00m [38;5;28;01mimport[39;00m IntEnum
[1;32m     33[0m [38;5;28;01mfrom[39;00m [38;5;21;01mio[39;00m [38;5;28;01mimport[39;00m BytesIO
[0;32m---> 35[0m [38;5;28;01mfrom[39;00m [38;5;21;01m.[39;00m [38;5;28;01mimport[39;00m Image
[1;32m     36[0m [38;5;28;01mfrom[39;00m [38;5;21;01m.[39;00m[38;5;21;01m_util[39;00m [38;5;28;01mimport[39;00m is_directory, is_path
[1;32m     39[0m [38;5;28;01mclass[39;00m [38;5;21;01mLayout[39;00m(IntEnum):

File [0;32m/opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/site-packages/PIL/Image.py:82[0m
[1;32m     73[0m MAX_IMAGE_PIXELS [38;5;241m=[39m [38;5;28mint[39m([38;5;241m1024[39m [38;5;241m*[39m [38;5;241m1024[39m [38;5;241m*[39m [38;5;241m1024[39m [38;5;241m/[39m[38;5;241m/[39m [38;5;241m4[39m [38;5;241m/[39m[38;5;241m/[39m [38;5;241m3[39m)
[1;32m     76[0m [38;5;28;01mtry[39;00m:
[1;32m     77[0m     [38;5;66;03m# If the _imaging C module is not present, Pillow will not load.[39;00m
[1;32m     78[0m     [38;5;66;03m# Note that other modules should not refer to _imaging directly;[39;00m
[1;32m     79[0m     [38;5;66;03m# import Image and use the Image.core variable instead.[39;00m
[1;32m     80[0m     [38;5;66;03m# Also note that Image.core is not a publicly documented interface,[39;00m
[1;32m     81[0m     [38;5;66;03m# and should be considered private and subject to change.[39;00m
[0;32m---> 82[0m     [38;5;28;01mfrom[39;00m [38;5;21;01m.[39;00m [38;5;28;01mimport[39;00m _imaging [38;5;28;01mas[39;00m core
[1;32m     84[0m     [38;5;28;01mif[39;00m __version__ [38;5;241m!=[39m [38;5;28mgetattr[39m(core, [38;5;124m"[39m[38;5;124mPILLOW_VERSION[39m[38;5;124m"[39m, [38;5;28;01mNone[39;00m):
[1;32m     85[0m         msg [38;5;241m=[39m (
[1;32m     86[0m             [38;5;124m"[39m[38;5;124mThe _imaging extension was built for another version of Pillow or PIL:[39m[38;5;130;01m\n[39;00m[38;5;124m"[39m
[1;32m     87[0m             [38;5;124mf[39m[38;5;124m"[39m[38;5;124mCore version: [39m[38;5;132;01m{[39;00m[38;5;28mgetattr[39m(core,[38;5;250m [39m[38;5;124m'[39m[38;5;124mPILLOW_VERSION[39m[38;5;124m'[39m,[38;5;250m [39m[38;5;28;01mNone[39;00m)[38;5;132;01m}[39;00m[38;5;130;01m\n[39;00m[38;5;124m"[39m
[1;32m     88[0m             [38;5;124mf[39m[38;5;124m"[39m[38;5;124mPillow version: [39m[38;5;132;01m{[39;00m__version__[38;5;132;01m}[39;00m[38;5;124m"[39m
[1;32m     89[0m         )

[0;31mImportError[0m: dlopen(/opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/site-packages/PIL/_imaging.cpython-311-darwin.so, 0x0002): Library not loaded: @rpath/libtiff.5.dylib
  Referenced from: <DB29B4E0-5E05-3F26-ABC5-79A53D06F310> /opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/site-packages/PIL/_imaging.cpython-311-darwin.so
  Reason: tried: '/opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/site-packages/PIL/../../../libtiff.5.dylib' (no such file), '/opt/anaconda3/envs/jupyter-book-py311/lib/python3.11/site-packages/PIL/../../../libtiff.5.dylib' (no such file), '/opt/anaconda3/envs/jupyter-book-py311/bin/../lib/libtiff.5.dylib' (no such file), '/opt/anaconda3/envs/jupyter-book-py311/bin/../lib/libtiff.5.dylib' (no such file), '/usr/local/lib/libtiff.5.dylib' (no such file), '/usr/lib/libtiff.5.dylib' (no such file, not in dyld cache)

